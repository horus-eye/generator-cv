const technicalSkills=["JavaScript","TypeScript","Python","Java","C++","C#","PHP","Ruby","Go","Rust","React","Angular","Vue.js","Next.js","Node.js","Express","Django","Flask","Spring Boot","HTML","CSS","Sass","Tailwind CSS","Bootstrap","Material-UI","SQL","MongoDB","PostgreSQL","MySQL","Redis","Firebase","Git","Docker","Kubernetes","AWS","Azure","Google Cloud","REST API","GraphQL","Microservices","CI/CD","Jest","Cypress","Selenium","JUnit","Figma","Adobe XD","Photoshop","Illustrator","Linux","Bash","PowerShell","Agile","Scrum",],softSkills=["Liderazgo","Comunicaci\xf3n","Trabajo en Equipo","Resoluci\xf3n de Problemas","Pensamiento Cr\xedtico","Creatividad","Adaptabilidad","Gesti\xf3n del Tiempo","Organizaci\xf3n","Atenci\xf3n al Detalle","Empat\xeda","Negociaci\xf3n","Toma de Decisiones","Gesti\xf3n de Proyectos","Mentor\xeda","Presentaciones","Escritura T\xe9cnica","An\xe1lisis","Innovaci\xf3n","Colaboraci\xf3n","Gesti\xf3n de Conflictos","Planificaci\xf3n Estrat\xe9gica","Multitasking","Aprendizaje Continuo","Proactividad","Responsabilidad","\xc9tica Profesional","Inteligencia Emocional",],exampleData={personal:{fullName:"Jane Doe",position:"Desarrolladora Full-Stack",email:"jane.doe@example.com",phone:"+1 555-123-4567",location:"San Francisco, CA",linkedin:"https://linkedin.com/in/janedoe",website:"https://janedoe.dev",summary:"Desarrolladora Full-Stack con 8 a\xf1os de experiencia dise\xf1ando, desarrollando y manteniendo aplicaciones web complejas. Experta en el stack MERN (MongoDB, Express, React, Node.js) y apasionada por crear interfaces de usuario intuitivas y experiencias de alto rendimiento. Busco activamente oportunidades para resolver problemas desafiantes y colaborar con equipos talentosos."},experience:[{id:1,position:"Senior Software Engineer",company:"Tech Solutions Inc.",startDate:"2020-01",endDate:"Presente",description:"Lider\xe9 un equipo de 5 ingenieros en el redise\xf1o de la plataforma principal, mejorando el rendimiento en un 40% y la satisfacci\xf3n del usuario en un 25%. Arquitect\xe9 e implement\xe9 un sistema de microservicios para el procesamiento de pagos."},{id:2,position:"Frontend Developer",company:"Creative Minds LLC",startDate:"2017-06",endDate:"2019-12",description:"Desarroll\xe9 interfaces de usuario interactivas y responsivas para clientes de alto perfil utilizando React y Redux. Colabor\xe9 estrechamente con dise\xf1adores de UX/UI para traducir maquetas en c\xf3digo funcional."},],education:[{id:1,degree:"Bootcamp de Desarrollo Web Full-Stack",institution:"Lambda School",startDate:"2016-09",endDate:"2017-05"},{id:2,degree:"Grado en Bellas Artes",institution:"Universidad de las Artes",startDate:"2012-08",endDate:"2016-05"},],technicalSkills:["JavaScript (ES6+)","React","Node.js","Express","MongoDB","GraphQL","REST API","Docker","Git","CSS","HTML","TypeScript","Python"],softSkills:["Liderazgo","Trabajo en Equipo","Resoluci\xf3n de Problemas","Comunicaci\xf3n","Mentor\xeda","Scrum"],languages:[{id:1,name:"Ingl\xe9s",level:"Nativo"},{id:2,name:"Espa\xf1ol",level:"B2 - Intermedio Alto"},],certifications:[{id:1,name:"MongoDB Certified Developer",organization:"MongoDB University",date:"2021-05",url:""},],style:"dashboard"};let cvData={personal:{fullName:"",position:"",email:"",phone:"",location:"",linkedin:"",website:"",summary:""},experience:[],education:[],technicalSkills:[],softSkills:[],languages:[],certifications:[],style:"minimal"};function loadExampleData(){Swal.fire({title:"\xbfCargar datos de ejemplo?",text:"Esto reemplazar\xe1 tus datos actuales. \xbfContinuar?",icon:"question",showCancelButton:!0,confirmButtonColor:"#2563eb",cancelButtonColor:"#64748b",confirmButtonText:"S\xed, cargar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(cvData=JSON.parse(JSON.stringify(exampleData)),populateForm(),saveAndRender(),showSuccess("Datos de ejemplo cargados."))})}function loadFromLocalStorage(){let e=localStorage.getItem("cvData");e&&(cvData=JSON.parse(e),populateForm())}function saveToLocalStorage(){localStorage.setItem("cvData",JSON.stringify(cvData))}function populateForm(){Object.keys(cvData.personal).forEach(e=>{$(`#${e}`).val(cvData.personal[e])}),$(`input[name="cvStyle"][value="${cvData.style}"]`).prop("checked",!0),renderAllLists(),updateSkillsSelection()}function initializeSkillsGrid(){let e=$("#technicalSkillsGrid");technicalSkills.forEach(a=>{let t=$(`
            <div class="skill-item" data-skill="${a}" data-type="technical">
                ${a}
            </div>
        `);e.append(t)});let a=$("#softSkillsGrid");softSkills.forEach(e=>{let t=$(`
            <div class="skill-item" data-skill="${e}" data-type="soft">
                ${e}
            </div>
        `);a.append(t)}),updateSkillsSelection()}function updateSkillsSelection(){$(".skill-item").removeClass("selected"),cvData.technicalSkills.forEach(e=>{$(`.skill-item[data-skill="${e}"][data-type="technical"]`).addClass("selected")}),cvData.softSkills.forEach(e=>{$(`.skill-item[data-skill="${e}"][data-type="soft"]`).addClass("selected")})}function setupEventListeners(){$("#personal").on("input","input, textarea",function(){let e=$(this).attr("id");cvData.personal.hasOwnProperty(e)&&(cvData.personal[e]=$(this).val(),saveToLocalStorage(),updatePreview(),updateProgressBar())}),$(".clear-btn").on("click",function(){let e=$(this).data("field");$(`#${e}`).val("").trigger("input")}),$('input[name="cvStyle"]').on("change",function(){cvData.style=$(this).val(),saveAndRender()}),$("#expCurrent, #eduCurrent").on("change",function(){let e="expCurrent"===$(this).attr("id"),a=e?"#expEndDate":"#eduEndDate";$(a).prop("disabled",$(this).is(":checked")),$(this).is(":checked")&&$(a).val("")}),$("#addExperience").on("click",addExperience),$("#addEducation").on("click",addEducation),$("#addLanguage").on("click",addLanguage),$("#addCertification").on("click",addCertification),$(document).on("click",".btn-remove-item",function(){let e=parseInt($(this).data("id"),10),a=$(this).data("type"),t=$(this).data("title");removeItem(a,e,t)}),$(document).on("click",".skill-item",function(){let e=$(this).data("skill"),a=$(this).data("type"),t="technical"===a?"technicalSkills":"softSkills",i=cvData[t].indexOf(e);$(this).hasClass("selected")?i>-1&&cvData[t].splice(i,1):-1===i&&cvData[t].push(e),$(this).toggleClass("selected"),saveAndRender()}),$("#searchTechnical, #searchSoft").on("input",function(){let e=$(this).val().toLowerCase(),a="searchTechnical"===$(this).attr("id")?"#technicalSkillsGrid":"#softSkillsGrid";$(`${a} .skill-item`).each(function(){let a=$(this).data("skill").toLowerCase();$(this).toggle(a.includes(e))})}),$("#downloadPDF").on("click",downloadPDF),$("#loadExample").on("click",loadExampleData),$("#clearAll").on("click",clearAll),$("#mobile-nav-form").on("click",function(){$("body").removeClass("view-preview").addClass("view-form"),$("#mobile-nav-preview").removeClass("active"),$(this).addClass("active")}),$("#mobile-nav-preview").on("click",function(){$("body").removeClass("view-form").addClass("view-preview"),$("#mobile-nav-form").removeClass("active"),$(this).addClass("active")})}function showSuccess(e){Swal.fire({icon:"success",title:"\xc9xito",text:e,timer:1500,showConfirmButton:!1})}function showError(e){Swal.fire({icon:"error",title:"Error",text:e})}function saveAndRender(){saveToLocalStorage(),renderAllLists(),updatePreview(),updateProgressBar()}function renderAllLists(){renderExperienceList(),renderEducationList(),renderLanguagesList(),renderCertificationsList()}function addExperience(){let e=$("#expPosition").val().trim(),a=$("#expCompany").val().trim(),t=$("#expStartDate").val(),i=$("#expEndDate").val(),s=$("#expCurrent").is(":checked"),n=$("#expDescription").val().trim();if(!e||!a||!t){showError("Por favor completa los campos obligatorios (Puesto, Empresa, Fecha Inicio)");return}if(!s&&!i){showError("Por favor indica la fecha de fin o marca como trabajo actual");return}cvData.experience.push({id:Date.now(),position:e,company:a,startDate:t,endDate:s?"Presente":i,description:n}),saveAndRender(),$("#expPosition, #expCompany, #expStartDate, #expEndDate, #expDescription").val(""),$("#expCurrent").prop("checked",!1).trigger("change"),showSuccess("Experiencia agregada correctamente")}function renderExperienceList(){let e=$("#experienceList");if(e.empty(),0===cvData.experience.length){e.html('<p class="text-muted text-center">No hay experiencias agregadas</p>');return}cvData.experience.forEach(a=>{let t=$(`
            <div class="list-item">
                <button class="btn btn-danger btn-sm btn-remove-item" data-type="experience" data-id="${a.id}" data-title="Experiencia">
                    <i class="fas fa-trash"></i>
                </button>
                <h6>${a.position}</h6>
                <p><strong>${a.company}</strong></p>
                <p><small>${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</small></p>
                ${a.description?`<p><small>${a.description}</small></p>`:""}
            </div>
        `);e.append(t)})}function addEducation(){let e=$("#eduDegree").val().trim(),a=$("#eduInstitution").val().trim(),t=$("#eduStartDate").val(),i=$("#eduEndDate").val(),s=$("#eduCurrent").is(":checked");if(!e||!a||!t){showError("Por favor completa los campos obligatorios (T\xedtulo, Instituci\xf3n, Fecha Inicio)");return}if(!s&&!i){showError("Por favor indica la fecha de fin o marca como estudiando actualmente");return}cvData.education.push({id:Date.now(),degree:e,institution:a,startDate:t,endDate:s?"Presente":i}),saveAndRender(),$("#eduDegree, #eduInstitution, #eduStartDate, #eduEndDate").val(""),$("#eduCurrent").prop("checked",!1).trigger("change"),showSuccess("Educaci\xf3n agregada correctamente")}function renderEducationList(){let e=$("#educationList");if(e.empty(),0===cvData.education.length){e.html('<p class="text-muted text-center">No hay educaci\xf3n agregada</p>');return}cvData.education.forEach(a=>{let t=$(`
            <div class="list-item">
                <button class="btn btn-danger btn-sm btn-remove-item" data-type="education" data-id="${a.id}" data-title="Educaci\xf3n">
                    <i class="fas fa-trash"></i>
                </button>
                <h6>${a.degree}</h6>
                <p><strong>${a.institution}</strong></p>
                <p><small>${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</small></p>
            </div>
        `);e.append(t)})}function addLanguage(){let e=$("#langName").val().trim(),a=$("#langLevel").val();if(!e||!a){showError("Por favor completa todos los campos");return}cvData.languages.push({id:Date.now(),name:e,level:a}),saveAndRender(),$("#langName, #langLevel").val(""),showSuccess("Idioma agregado correctamente")}function renderLanguagesList(){let e=$("#languagesList");if(e.empty(),0===cvData.languages.length){e.html('<p class="text-muted text-center">No hay idiomas agregados</p>');return}cvData.languages.forEach(a=>{let t=$(`
            <div class="list-item">
                <button class="btn btn-danger btn-sm btn-remove-item" data-type="languages" data-id="${a.id}" data-title="Idioma">
                    <i class="fas fa-trash"></i>
                </button>
                <h6>${a.name}</h6>
                <p><strong>Nivel:</strong> ${a.level}</p>
            </div>
        `);e.append(t)})}function addCertification(){let e=$("#certName").val().trim(),a=$("#certOrg").val().trim(),t=$("#certDate").val(),i=$("#certUrl").val().trim();if(!e||!a||!t){showError("Por favor completa los campos obligatorios (Nombre, Organizaci\xf3n, Fecha)");return}cvData.certifications.push({id:Date.now(),name:e,organization:a,date:t,url:i}),saveAndRender(),$("#certName, #certOrg, #certDate, #certUrl").val(""),showSuccess("Certificaci\xf3n agregada correctamente")}function renderCertificationsList(){let e=$("#certificationsList");if(e.empty(),0===cvData.certifications.length){e.html('<p class="text-muted text-center">No hay certificaciones agregadas</p>');return}cvData.certifications.forEach(a=>{let t=$(`
            <div class="list-item">
                <button class="btn btn-danger btn-sm btn-remove-item" data-type="certifications" data-id="${a.id}" data-title="Certificaci\xf3n">
                    <i class="fas fa-trash"></i>
                </button>
                <h6>${a.name}</h6>
                <p><strong>${a.organization}</strong></p>
                <p><small>${formatDate(a.date)}</small></p>
                ${a.url?`<p><small><a href="${a.url}" target="_blank" rel="noopener noreferrer">Ver certificado</a></small></p>`:""}
            </div>
        `);e.append(t)})}function removeItem(e,a,t){Swal.fire({title:`\xbfEliminar ${t}?`,text:"Esta acci\xf3n no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&(cvData[e]=cvData[e].filter(e=>e.id!==a),saveAndRender(),showSuccess(`${t} eliminado/a correctamente`))})}function updatePreview(){let e=$("#cvPreview");"minimal"===cvData.style?e.html(generateMinimalCV()):e.html(generateDashboardCV())}function generateMinimalCV(){let e='<div class="cv-minimal">';return e+='<div class="cv-header">',e+=`<div class="cv-name">${(cvData.personal.fullName||"Tu Nombre").toUpperCase()}</div>`,cvData.personal.position&&(e+=`<div class="cv-position">${cvData.personal.position}</div>`),e+='<div class="cv-contact">',cvData.personal.email&&(e+=`<div class="cv-contact-item"><i class="fas fa-envelope"></i> ${cvData.personal.email}</div>`),cvData.personal.phone&&(e+=`<div class="cv-contact-item"><i class="fas fa-phone"></i> ${cvData.personal.phone}</div>`),cvData.personal.location&&(e+=`<div class="cv-contact-item"><i class="fas fa-map-marker-alt"></i> ${cvData.personal.location}</div>`),cvData.personal.linkedin&&(e+=`<div class="cv-contact-item"><i class="fab fa-linkedin"></i> <a href="${cvData.personal.linkedin}" target="_blank" rel="noopener noreferrer">${cvData.personal.linkedin.replace(/^https?:\/\//,"")}</a></div>`),cvData.personal.website&&(e+=`<div class="cv-contact-item"><i class="fas fa-globe"></i> <a href="${cvData.personal.website}" target="_blank" rel="noopener noreferrer">${cvData.personal.website.replace(/^https?:\/\//,"")}</a></div>`),e+="</div></div>",cvData.personal.summary&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Resumen Profesional</div>',e+=`<p>${cvData.personal.summary}</p>`,e+="</div>"),cvData.experience.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Experiencia Laboral</div>',cvData.experience.forEach(a=>{e+='<div class="cv-item">',e+='<div class="cv-item-header">',e+=`<div><div class="cv-item-title">${a.position}</div><div class="cv-item-subtitle">${a.company}</div></div>`,e+=`<div class="cv-item-date">${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</div>`,e+="</div>",a.description&&(e+=`<div class="cv-item-description">${a.description}</div>`),e+="</div>"}),e+="</div>"),cvData.education.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Educaci\xf3n</div>',cvData.education.forEach(a=>{e+='<div class="cv-item">',e+='<div class="cv-item-header">',e+=`<div><div class="cv-item-title">${a.degree}</div><div class="cv-item-subtitle">${a.institution}</div></div>`,e+=`<div class="cv-item-date">${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</div>`,e+="</div></div>"}),e+="</div>"),cvData.technicalSkills.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Habilidades T\xe9cnicas</div>',e+='<div class="cv-skills">',cvData.technicalSkills.forEach(a=>{e+=`<span class="cv-skill-tag">${a}</span>`}),e+="</div></div>"),cvData.softSkills.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Habilidades Blandas</div>',e+='<div class="cv-skills">',cvData.softSkills.forEach(a=>{e+=`<span class="cv-skill-tag">${a}</span>`}),e+="</div></div>"),cvData.languages.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Idiomas</div>',cvData.languages.forEach(a=>{e+=`<div class="cv-item"><strong>${a.name}:</strong> ${a.level}</div>`}),e+="</div>"),cvData.certifications.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Certificaciones</div>',cvData.certifications.forEach(a=>{e+='<div class="cv-item">',e+=`<div class="cv-item-title">${a.name}</div>`,e+=`<div class="cv-item-subtitle">${a.organization} - ${formatDate(a.date)}</div>`,e+="</div>"}),e+="</div>"),e+="</div>"}function generateDashboardCV(){let e='<div class="cv-dashboard">';return e+='<div class="cv-sidebar">',e+=`<div class="cv-name">${(cvData.personal.fullName||"Tu Nombre").toUpperCase()}</div>`,cvData.personal.position&&(e+=`<div class="cv-position">${cvData.personal.position}</div>`),e+='<div class="cv-contact">',cvData.personal.email&&(e+=`<div class="cv-contact-item"><i class="fas fa-envelope"></i> ${cvData.personal.email}</div>`),cvData.personal.phone&&(e+=`<div class="cv-contact-item"><i class="fas fa-phone"></i> ${cvData.personal.phone}</div>`),cvData.personal.location&&(e+=`<div class="cv-contact-item"><i class="fas fa-map-marker-alt"></i> ${cvData.personal.location}</div>`),cvData.personal.linkedin&&(e+=`<div class="cv-contact-item"><i class="fab fa-linkedin"></i> <a href="${cvData.personal.linkedin}" target="_blank" rel="noopener noreferrer">${cvData.personal.linkedin.replace(/^https?:\/\//,"")}</a></div>`),cvData.personal.website&&(e+=`<div class="cv-contact-item"><i class="fas fa-globe"></i> <a href="${cvData.personal.website}" target="_blank" rel="noopener noreferrer">${cvData.personal.website.replace(/^https?:\/\//,"")}</a></div>`),e+="</div>",cvData.technicalSkills.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Habilidades T\xe9cnicas</div>',cvData.technicalSkills.forEach(a=>{e+=`<span class="cv-skill-tag">${a}</span>`}),e+="</div>"),cvData.softSkills.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Habilidades Blandas</div>',cvData.softSkills.forEach(a=>{e+=`<span class="cv-skill-tag">${a}</span>`}),e+="</div>"),cvData.languages.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Idiomas</div>',cvData.languages.forEach(a=>{e+=`<div style="margin-bottom: 8px;"><strong>${a.name}</strong><br><small>${a.level}</small></div>`}),e+="</div>"),e+="</div>",e+='<div class="cv-main">',cvData.personal.summary&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Resumen Profesional</div>',e+=`<p>${cvData.personal.summary}</p>`,e+="</div>"),cvData.experience.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Experiencia Laboral</div>',cvData.experience.forEach(a=>{e+='<div class="cv-item">',e+='<div class="cv-item-header">',e+=`<div><div class="cv-item-title">${a.position}</div><div class="cv-item-subtitle">${a.company}</div></div>`,e+=`<div class="cv-item-date">${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</div>`,e+="</div>",a.description&&(e+=`<div class="cv-item-description">${a.description}</div>`),e+="</div>"}),e+="</div>"),cvData.education.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Educaci\xf3n</div>',cvData.education.forEach(a=>{e+='<div class="cv-item">',e+='<div class="cv-item-header">',e+=`<div><div class="cv-item-title">${a.degree}</div><div class="cv-item-subtitle">${a.institution}</div></div>`,e+=`<div class="cv-item-date">${formatDate(a.startDate)} - ${"Presente"===a.endDate?"Presente":formatDate(a.endDate)}</div>`,e+="</div></div>"}),e+="</div>"),cvData.certifications.length>0&&(e+='<div class="cv-section">',e+='<div class="cv-section-title">Certificaciones</div>',cvData.certifications.forEach(a=>{e+='<div class="cv-item">',e+=`<div class="cv-item-title">${a.name}</div>`,e+=`<div class="cv-item-subtitle">${a.organization} - ${formatDate(a.date)}</div>`,e+="</div>"}),e+="</div>"),e+="</div></div>"}function formatDate(e){if(!e||"Presente"===e)return e;let[a,t]=e.split("-");return`${["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][Number.parseInt(t)-1]} ${a}`}function updateProgressBar(){let e={personal:e=>e.fullName&&e.email&&e.phone&&e.position,summary:e=>e.summary&&e.summary.length>20,experience:e=>e.experience.length>0,education:e=>e.education.length>0,technicalSkills:e=>e.technicalSkills.length>=3,softSkills:e=>e.softSkills.length>=3,languages:e=>e.languages.length>0},a=0,t=Object.keys(e).length;e.personal(cvData.personal)&&a++,e.summary(cvData.personal)&&a++,e.experience(cvData)&&a++,e.education(cvData)&&a++,e.technicalSkills(cvData)&&a++,e.softSkills(cvData)&&a++,e.languages(cvData)&&a++;let i=Math.round(a/t*100),s=$("#cv-progress-bar");s.css("width",`${i}%`),s.attr("aria-valuenow",i),s.text(`${i}%`);let n=$("#downloadPDF");100===i?(n.prop("disabled",!1).removeClass("btn-secondary").addClass("btn-success"),s.addClass("bg-success"),n.attr("title","\xa1Tu CV est\xe1 listo para descargar!")):(n.prop("disabled",!0).removeClass("btn-success").addClass("btn-secondary"),s.removeClass("bg-success"),n.attr("title",`Completa el ${100-i}% restante de tu CV para descargar.`))}async function downloadPDF(){if(!cvData.personal.fullName){showError("Por favor completa al menos tu nombre antes de descargar el CV.");return}let e=$("#downloadPDF"),a=e.html();e.html('<span class="spinner-border spinner-border-sm me-2"></span>Generando PDF...').prop("disabled",!0);try{let t=document.getElementById("cvPreview");t.style.display="none",t.offsetHeight,t.style.display="";let i=await html2canvas(t,{scale:3,useCORS:!0,logging:!1,backgroundColor:"#ffffff",scrollX:-window.scrollX,scrollY:-window.scrollY,windowWidth:document.documentElement.offsetWidth,windowHeight:document.documentElement.offsetHeight}),s=i.toDataURL("image/png",1),n=new jspdf.jsPDF({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),c=n.internal.pageSize.getWidth(),l=n.internal.pageSize.getHeight(),o=i.width,r=i.height,d=c,v=d/(o/r),p=v,m=0;for(n.addImage(s,"PNG",0,m,d,v),p-=l;p>0;)m=p-v,n.addPage(),n.addImage(s,"PNG",0,m,d,v),p-=l;let u=`CV_${cvData.personal.fullName.replace(/\s+/g,"_")||"CV"}.pdf`;n.save(u),showSuccess("Tu CV ha sido descargado correctamente.")}catch(f){console.error("Error al generar PDF:",f),showError("Hubo un error al generar el PDF. Int\xe9ntalo de nuevo.")}finally{e.html(a).prop("disabled",!1)}}function clearAll(){Swal.fire({title:"\xbfEst\xe1s seguro?",text:"Se eliminar\xe1n todos los datos del CV",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"S\xed, limpiar todo",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(cvData={personal:{fullName:"",position:"",email:"",phone:"",location:"",linkedin:"",website:"",summary:""},experience:[],education:[],technicalSkills:[],softSkills:[],languages:[],certifications:[],style:"minimal"},localStorage.removeItem("cvData"),$('input[type="text"], input[type="email"], input[type="tel"], input[type="url"], input[type="month"], textarea').val(""),$('input[type="checkbox"]').prop("checked",!1),$("select").val(""),$("#styleMinimal").prop("checked",!0),$("#experienceList, #educationList, #languagesList, #certificationsList").empty(),$(".skill-item").removeClass("selected"),updatePreview(),updateProgressBar(),Swal.fire({icon:"success",title:"Limpiado",text:"Todos los datos han sido eliminados",timer:1500,showConfirmButton:!1}))})}$(document).ready(()=>{loadFromLocalStorage(),initializeSkillsGrid(),setupEventListeners(),updatePreview(),updateProgressBar()});